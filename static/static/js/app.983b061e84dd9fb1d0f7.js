webpackJsonp([1],[,,,function(t,e,o){"use strict";function n(t,e,o,n){d.a.post(t,e).then(function(t){o(t)}).catch(function(t){console.log("error >> ",t),n(t)})}function i(t,e){n(u+"/blog/list",null,t,e)}function a(t,e,o){n(u+"/blog/upload",t,e,o)}function l(t,e,o){n(u+"/blog/",t,e,o)}function s(t,e,o){n(u+"/blog/update",t,e,o)}function r(t,e,o){n(u+"/account/login",t,e,o)}o.d(e,"b",function(){return v}),o.d(e,"a",function(){return g});var c=o(24),d=o.n(c),u=(o(43),"/api"),v={list:i,upload:a,get:l,update:s},g={Login:r}},,,,,,,,,,function(t,e,o){"use strict";var n={mobile:"",name:"",avatar:""};e.a=n},,,,function(t,e){},function(t,e,o){function n(t){o(63)}var i=o(2)(o(45),o(80),n,null,null);t.exports=i.exports},function(t,e,o){"use strict";var n=o(7),i=o(74),a=o.n(i),l=o(76),s=o.n(l),r=o(75),c=o.n(r),d=o(73),u=o.n(d),v=[{path:"/blog/list",component:a.a},{path:"/blog/upload",component:s.a},{path:"/blog/update/:id",name:"update-blog",component:c.a},{path:"/blog/:id",name:"detail-blog",component:u.a},{path:"*",component:a.a}],g=new n.a({routes:v});e.a=g},function(t,e){},function(t,e,o){function n(t){o(64)}var i=o(2)(o(44),o(81),n,null,null);t.exports=i.exports},,,,,,,,,,,,,,,,,,,,,function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(22),i=o(21),a=o.n(i),l=o(23),s=o.n(l),r=o(19),c=o(7),d=o(20);o.n(d);n.a.use(c.a),n.a.use(s.a),n.a.config.productionTip=!1,new n.a({router:r.a,el:"#app",template:"<App/>",components:{App:a.a}})},function(t,e,o){"use strict"},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(3),i=o(13);e.default={data:function(){return{account:{avatar:"",mobile:""},mini:!1,drawer:!1,timeout:3e3,sideIcon:!1,dialog:!1,snackbar:{open:!1,context:"info",text:""},loginForm:{mobile:"",password:""}}},name:"app",methods:{showSideIcon:function(){this.sideIcon=!this.sideIcon},showDialog:function(){this.dialog=!this.dialog},login:function(){console.log("login ......",this.loginForm);var t=this;n.a.Login(t.loginForm,function(e){console.log("login resp >> ",e),e.data.success?(t.sideIcon=!0,t.dialog=!1,t.snackbar.open=!0,t.snackbar.context="success",t.snackbar.text="welcome ~",t.account=e.data.account,i.a.avatar=e.data.account.avatar,i.a.mobile=e.data.account.mobile):(t.snackbar.open=!0,t.snackbar.context="error",t.snackbar.text="login failed")})}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(59),i=(o.n(n),o(17)),a=(o.n(i),o(71)),l=o.n(a),s=o(5),r=o.n(s);e.default={props:{blog:{type:Object,default:function(){return{title:"",source:"",description:"",content:"",tag:""}}},enableSave:Boolean,hasSaveBtn:Boolean,hasDescription:Boolean,hasSource:Boolean,enableCommit:Boolean,hasTag:Boolean,hasHead:Boolean,hasTitle:Boolean,head:String},data:function(){return{description:"",source:"",tag:"",title:"",mde:null}},mounted:function(){console.log("this props blog: ",this.blog);var t=document.querySelector("#editor__markdown input"),e=this;console.log("self.blog.content ",e.blog.content),this.mde=new l.a({element:t,initialValue:e.blog.content})},methods:{save:function(){this.$emit("save",this.genEditInfo())},commit:function(){this.$emit("commit",this.genEditInfo())},genEditInfo:function(){var t=this.mde.value(),e=document.createElement("div");if(e.innerHTML=r()(t),!this.blog.description.length){var o=e.querySelectorAll("div > p"),n=e.querySelectorAll("div > h1, div > h2, div > h3, div > h4, div > h5, div > h6"),i=e.querySelector("p");o&&o.length?this.blog.description=o[0].innerText:n&&n.length?this.blog.description=n[0].innerText:i&&(this.blog.description=i.innerText)}return this.blog.content=t,this.blog}},watch:{"blog.content":{handler:function(){this.mde.value(this.blog.content)},deep:!0}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(5),i=o.n(n),a=o(3),l=o(17),s=(o.n(l),o(13));e.default={data:function(){return{blog:{}}},mounted:function(){this.fetchData(this.$route.params.id)},methods:{fetchData:function(t){var e=this;a.b.get({id:t},function(t){t.data.blog&&(e.blog=t.data.blog)})},edit:function(){this.$router.push({name:"update-blog",params:{id:this.blog.id}})}},computed:{afterMarked:function(){if(this.blog.content)return i()(this.blog.content,{sanitize:!0})},isAdmin:function(){return!!s.a.mobile.length}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(3);e.default={data:function(){return{blogs:[]}},mounted:function(){var t=this;n.b.list(function(e){e.data.blogs&&e.data.blogs.length&&(t.blogs=e.data.blogs)})},methods:{showDetailInfo:function(t){console.log("id  in show deatial info > ",t),this.$router.push({name:"detail-blog",params:{id:t}})},cardClick:function(){console.log("card clicked")}}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(18),i=o.n(n),a=o(3);e.default={data:function(){return{blog:{},errMsg:"",alert:!1,enableCommit:!0}},components:{editor:i.a},methods:{fetchData:function(t){var e=this;a.b.get({id:t},function(t){console.log("response in update vue > ",t),t.data.blog&&(e.blog=t.data.blog)})},commit:function(t){var e=this;e.enableCommit=!1,t.id=this.blog.id,console.log("update data ",t),a.b.update(t,function(t){console.log("response >>>>>>> ",t),e.$router.push({name:"detail-blog",params:{id:t.data.blog.id}})},function(t){console.log("error",t),e.errMsg="commit failed",e.alert=!0,e.enableCommit=!0})}},created:function(){console.log("this.route param ",this.$route.params.id),this.fetchData(this.$route.params.id)}}},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(18),i=o.n(n),a=o(3);e.default={data:function(){return{id:"",errMsg:"",alert:!1,enableCommit:!0,enableSave:!0}},components:{editor:i.a},methods:{commit:function(t){var e=this;e.enableCommit=!1,e.id&&(t.id=e.id),console.log("commit data >>> ",t),a.b.upload(t,function(t){console.log("response >>>>>>> ",t),e.$router.push({name:"detail-blog",params:{id:t.data.blog.id}})},function(t){console.log("error",t),e.errMsg="commit failed",e.alert=!0,e.enableCommit=!0})},save:function(t){var e=this;t.id=e.id,a.b.update(t,function(t){console.log("save blog"),"blog"in t.data&&"id"in t.data.blog?e.id=t.data.blog.id:console.log("error, response data format is wrong")})}}}},,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,,,,,function(t,e,o){function n(t){o(65)}var i=o(2)(o(46),o(82),n,null,null);t.exports=i.exports},function(t,e,o){function n(t){o(60)}var i=o(2)(o(47),o(77),n,"data-v-0e11e8f7",null);t.exports=i.exports},function(t,e,o){function n(t){o(62)}var i=o(2)(o(48),o(79),n,null,null);t.exports=i.exports},function(t,e,o){function n(t){o(61)}var i=o(2)(o(49),o(78),n,null,null);t.exports=i.exports},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"blog-list"}},[o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-flex",{attrs:{xs14:"",sm8:""}},t._l(t.blogs,function(e){return o("v-card",{key:e,staticClass:"blog-list-card"},[o("v-card-title",{attrs:{"primary-title":""},on:{click:function(o){t.showDetailInfo(e.id)}}},[o("div",[o("div",{staticClass:"headline"},[t._v(t._s(e.title)+" ")]),t._v(" "),o("div",[t._v(t._s(e.description))])])]),t._v(" "),o("v-divider"),t._v(" "),o("v-card-actions",[e.source&&e.source.length?o("v-chip",{staticClass:"blog-source",attrs:{label:""}},[t._v(t._s(e.source))]):t._e(),t._v(" "),e.tag&&e.tag.length?o("div",t._l(e.tag.split(" "),function(e){return e&&e.length?o("v-chip",{key:e},[t._v(t._s(e))]):t._e()})):t._e()],1)],1)}))],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("editor",{attrs:{hasTitle:"",hasTag:"",hasSource:"",hasDescription:"",enableCommit:t.enableCommit,hasSaveBtn:"",enableSave:t.enableSave},on:{commit:t.commit,save:t.save}}),t._v(" "),o("v-alert",{attrs:{error:"",dismissible:"",id:"upload-alert"},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v("\n    "+t._s(t.errMsg)+"\n  ")])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("editor",{attrs:{blog:t.blog,hasTitle:"",hasTag:"",hasSource:"",hasDescription:"",enableCommit:t.enableCommit},on:{commit:t.commit}}),t._v(" "),o("v-alert",{attrs:{error:"",dismissible:"",id:"upload-alert"},model:{value:t.alert,callback:function(e){t.alert=e},expression:"alert"}},[t._v("\n    "+t._s(t.errMsg)+"\n  ")])],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-flex",{attrs:{xs14:"",sm8:""}},[o("v-card",[t.hasHead?o("v-card-title",[o("h3",[t._v(t._s(t.head))])]):t._e(),t._v(" "),o("div",{staticClass:"editor__markdown__header"},[t.hasTitle?o("v-text-field",{attrs:{id:"editor__markdow__title",type:"text",placeholder:"title"},model:{value:t.blog.title,callback:function(e){t.blog.title=e},expression:"blog.title"}}):t._e()],1),t._v(" "),o("div",{staticClass:"editor__markdown__header"},[t.hasTag?o("v-text-field",{attrs:{value:"10",placeholder:"tag"},model:{value:t.blog.tag,callback:function(e){t.blog.tag=e},expression:"blog.tag"}}):t._e()],1),t._v(" "),o("div",{staticClass:"editor__markdown__header"},[t.hasSource?o("v-text-field",{attrs:{placeholder:"source"},model:{value:t.blog.source,callback:function(e){t.blog.source=e},expression:"blog.source"}}):t._e()],1),t._v(" "),o("div",{staticClass:"editor__markdown__header"},[t.hasDescription?o("v-text-field",{attrs:{placeholder:"description"},model:{value:t.blog.description,callback:function(e){t.blog.description=e},expression:"blog.description"}}):t._e()],1),t._v(" "),o("div",{attrs:{id:"editor__markdown"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.blog.content,expression:"blog.content"}],attrs:{type:"textarea",placeholder:"content"},domProps:{value:t.blog.content},on:{input:function(e){e.target.composing||(t.blog.content=e.target.value)}}})]),t._v(" "),o("div",[t.hasSaveBtn?o("v-btn",{staticClass:"light-blue lighten-2 white--text",attrs:{disabled:!t.enableSave},nativeOn:{click:function(e){e.stopPropagation(),t.save(e)}}},[t._v("save")]):t._e(),t._v(" "),o("v-btn",{staticClass:"light-blue lighten-2 white--text",attrs:{disabled:!t.enableCommit},nativeOn:{click:function(e){e.stopPropagation(),t.commit(e)}}},[t._v("commit")])],1)],1)],1)],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-app",[o("v-navigation-drawer",{attrs:{temporary:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[o("v-list",[o("v-list-tile",{attrs:{avatar:"",tag:"div"}},[o("v-list-tile-avatar",[o("img",{attrs:{src:t.account.avatar}})]),t._v(" "),o("v-list-tile-content",[o("v-list-tile-title",[t._v(t._s(t.account.mobile))])],1)],1)],1),t._v(" "),o("v-divider"),t._v(" "),o("v-list",[o("v-list-tile",{attrs:{to:"/blog/list"}},[o("v-list-tile-action",[o("v-btn",{attrs:{icon:""}},[o("v-icon",[t._v("home")])],1)],1),t._v(" "),o("v-list-tile-content",[o("v-list-tile-title",[t._v("home page")])],1)],1)],1),t._v(" "),o("v-list",[o("v-list-tile",{attrs:{to:"/blog/upload"}},[o("v-list-tile-action",[o("v-btn",{attrs:{icon:""}},[o("v-icon",[t._v("edit")])],1)],1),t._v(" "),o("v-list-tile-content",[o("v-list-tile-title",[t._v("write blog")])],1)],1)],1)],1),t._v(" "),o("v-toolbar",{staticClass:"light-blue lighten-2"},[o("v-toolbar-side-icon",{directives:[{name:"show",rawName:"v-show",value:t.sideIcon,expression:"sideIcon"}],nativeOn:{click:function(e){e.stopPropagation(),t.drawer=!0}}}),t._v(" "),o("v-toolbar-title",{staticClass:"white--text"},[t._v("你行你上啊 ->")]),t._v(" "),o("v-spacer"),t._v(" "),o("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){e.stopPropagation(),t.showDialog(e)}}},[o("v-icon",[t._v("account_circle")])],1),t._v(" "),o("v-dialog",{attrs:{lazy:"",absolute:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-card-title",[o("span",[t._v("Login")])]),t._v(" "),o("v-card-text",[o("v-text-field",{attrs:{"prepend-icon":"account_box"},model:{value:t.loginForm.mobile,callback:function(e){t.loginForm.mobile=e},expression:"loginForm.mobile"}}),t._v(" "),o("v-text-field",{attrs:{"prepend-icon":"lock",type:"password"},model:{value:t.loginForm.password,callback:function(e){t.loginForm.password=e},expression:"loginForm.password"}}),t._v(" "),o("div",{attrs:{id:"login-btn"}},[o("v-btn",{staticClass:"light-blue lighten-2 white--text",nativeOn:{click:function(e){t.login(e)}}},[t._v("\n                commit\n              ")])],1)],1)],1)],1)],1),t._v(" "),o("v-snackbar",{attrs:{timeout:t.timeout,top:"",success:"success"===t.snackbar.context,error:"error"===t.snackbar.context},model:{value:t.snackbar.open,callback:function(e){t.snackbar.open=e},expression:"snackbar.open"}},[t._v("\n  "+t._s(t.snackbar.text)+"\n  ")]),t._v(" "),o("main",[o("v-container",{attrs:{fluid:""}},[o("router-view")],1)],1)],1)},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-layout",{attrs:{row:"","justify-center":""}},[o("v-flex",{attrs:{xs16:"",sm10:""}},[o("v-card",[o("div",[t.isAdmin?o("v-btn",{staticClass:"light-blue lighten-2 white--text",nativeOn:{click:function(e){e.stopPropagation(),t.edit(e)}}},[t._v("Edit")]):t._e()],1),t._v(" "),o("v-divider"),t._v(" "),o("div",{staticClass:"detail-header"},[t.blog.title?o("h3",[t._v(t._s(t.blog.title))]):t._e()]),t._v(" "),o("v-divider"),t._v(" "),o("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.afterMarked)}})],1)],1)],1)],1)},staticRenderFns:[]}},,function(t,e){}],[42]);
//# sourceMappingURL=app.983b061e84dd9fb1d0f7.js.map